<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
    <table class="fixed" border="1">
        <col width="800px" /><col width="300px" /><col width="300px" /><col width="100px" />
        <thead>
            <tr><th>Name</th><th>Type</th><th>Size (Bytes)</th><th>Delete</th></tr>
        </thead>
        <tbody id="cont-files">
        </tbody>
    </table>
</body>
<script>
(function() {
    var loadFiles = dir => {
        var xh = new XMLHttpRequest();
        xh.onreadystatechange = () => {
            if (xh.readyState == 4 && xh.status == 200) {
                var res = JSON.parse(xh.responseText);
                var cont = document.querySelector('#cont-files');
                cont.innerHTML = '';
                res.forEach(i => {
                    cont.innerHTML += 
                        `<tr>
                         <td><a href="${i.name}">${i.name.substring(1)}</a></td>
                         <td>${i.type}</td>
                         <td>${i.size}</td>
                         <td>
                             <form method="post" action="/delete">
                             <button type="submit" value="$(i.name}">Delete</button>
                             </form>
                         </td>
                         </tr>`;
                });
            };
        };
        xh.open("GET", "/list?dir=" + dir, true);
        xh.send(null);
    };

    loadFiles('/');
})();

</script>
</html>
